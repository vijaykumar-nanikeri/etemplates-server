"use strict";(self.webpackChunketemplates=self.webpackChunketemplates||[]).push([[502],{5502:(H,T,l)=>{l.r(T),l.d(T,{UserTemplatesModule:()=>z});var d=l(9808),x=l(9192),u=l(9127),e=l(4893);let b=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-templates"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),o})();var U=l(5698),A=l(9057),C=l(288),v=l(4995),h=(()=>{return(o=h||(h={})).Title="Delete User Template",o.Text="",o.CancelButton="Cancel",o.ConfirmButton="Yes, Delete",h;var o})();const w=[{code:"sno",name:"S.No."},{code:"uuid",name:"UUID"},{code:"filename",name:"File Name"},{code:"createdOn",name:"Created on"},{code:"action",name:"Action"}];var y=l(1134),q=l(5976),f=l(6892),Z=l(5850),V=l(8969);const F=function(){return[0]},S=function(o){return[o]},Y=function(o,s){return{"text-end":o,"text-center":s}};function I(o,s){if(1&o&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=s.index,i=e.oxw();e.Q6J("ngClass",e.WLB(5,Y,e.DdM(2,F).includes(n),e.VKq(3,S,i.userTemplatesThead.length-1).includes(n))),e.xp6(1),e.hij(" ",t.name," ")}}function J(o,s){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"td",8),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.uIk("colspan",t.userTemplatesThead.length),e.xp6(1),e.hij(" ",t.homeLabels.NoRecordsFound," ")}}function _(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",10),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"button",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).view(a)}),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.ALo(10,"formatDate"),e.qZA(),e.TgZ(11,"td",12),e.TgZ(12,"button",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).openDeleteUserTemplateModal(a)}),e._UZ(13,"i",14),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(3),e.hij(" ",t.uuid," "),e.xp6(2),e.Oqu(t.filename),e.xp6(2),e.Oqu(e.xi3(10,4,t.createdOn,"DMY"))}}function O(o,s){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,_,14,7,"tr",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.userTemplates)}}let M=(()=>{class o{constructor(t,n,i,a,r){this.router=t,this.modalService=n,this.toastService=i,this.httpService=a,this.authService=r,this.userTemplatesThead=[],this.userTemplates=[]}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.homeLabels=C.n,this.deleteUserTemplateModalLabels=h,this.userTemplatesThead=w,this.getUserTemplates()}getUserTemplates(){var t;const n=null===(t=this.userDetails)||void 0===t?void 0:t.id;this.httpService.get(`${v.n.UserTemplates}/${n}/all`).subscribe(i=>{this.userTemplates=null==i?void 0:i.data},i=>{console.log(i)})}openDeleteUserTemplateModal(t){this.modalRef=this.modalService.show(A.X,{initialState:{title:this.deleteUserTemplateModalLabels.Title,text:`Are you sure you want to delete<br />${(null==t?void 0:t.uuid)&&" <strong>"+(null==t?void 0:t.uuid)+"</strong>"}?`,cancelButton:this.deleteUserTemplateModalLabels.CancelButton,confirmButton:this.deleteUserTemplateModalLabels.ConfirmButton,confirmButtonClass:"btn-danger"},class:"modal-dialog-centered"}),this.modalRef.content.outputEmitter.pipe((0,U.q)(1)).subscribe(i=>{i&&this.deleteUserTemplate(t)})}deleteUserTemplate(t){const n=null==t?void 0:t.id;n&&this.httpService.delete(`${v.n.UserTemplates}/${n}`).subscribe(i=>{(null==i?void 0:i.message)&&this.toastService.success(null==i?void 0:i.message),this.getUserTemplates()},i=>{console.log(i)},()=>{var i;null===(i=this.modalRef)||void 0===i||i.hide()})}view(t){this.router.navigate(["/home/user-templates",t.id])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(y.tT),e.Y36(q.jE),e.Y36(f.O),e.Y36(Z.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-all"]],decls:9,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[1,"text-center","fw-bold"],[4,"ngFor","ngForOf"],["scope","row",1,"text-end"],["type","button",1,"btn","btn-link","p-0","fw-bold",3,"click"],[1,"text-center"],["type","button",1,"btn","btn-link","p-0","ms-2",3,"click"],[1,"bi","bi-trash","text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"table",3),e.TgZ(4,"thead",4),e.TgZ(5,"tr"),e.YNc(6,I,2,8,"th",5),e.qZA(),e.qZA(),e.YNc(7,J,4,2,"tbody",6),e.YNc(8,O,2,1,"tbody",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.userTemplatesThead),e.xp6(1),e.Q6J("ngIf",!n.userTemplates.length),e.xp6(1),e.Q6J("ngIf",n.userTemplates.length>0))},directives:[d.sg,d.mk,d.O5],pipes:[V.i],styles:[""]}),o})();var c=l(2382),g=(()=>((g||(g={})).View="View",g))(),N=l(1792),B=l(4603),D=l(6590);function $(o,s){if(1&o&&(e.TgZ(0,"span",15),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.userTemplateUuid)}}function k(o,s){if(1&o&&(e.TgZ(0,"span",16),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.hij("(",t.filename,")")}}const Q=function(){return["/home/user-templates/view-all"]},j=[{path:"",component:b,children:[{path:"view-all",component:M},{path:":id",component:(()=>{class o{constructor(t,n,i,a,r,m){this.route=t,this.fb=n,this.httpService=i,this.authService=a,this.ckeditor4AngularService=r,this.downloadTemplateService=m,this.userTemplateId=0,this.userTemplateUuid="",this.filename="",this.route.params.subscribe(p=>{this.userTemplateId=+p.id,this.userTemplateId&&this.getText()})}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.editorConfig=this.ckeditor4AngularService.getConfig(),this.labels=g,this.textForm=this.fb.group({text:["",[c.kI.required]]})}getText(){this.httpService.get(`${v.n.UserTemplates}/${this.userTemplateId}`).subscribe(t=>{var n,i,a,r;this.userTemplateUuid=null===(n=null==t?void 0:t.data[0])||void 0===n?void 0:n.uuid,this.filename=null===(i=null==t?void 0:t.data[0])||void 0===i?void 0:i.filename,null===(a=this.textForm.get("text"))||void 0===a||a.setValue((null===(r=null==t?void 0:t.data[0])||void 0===r?void 0:r.text)||"")},t=>{console.log(t)})}download(t){var n,i;const a={userId:null===(n=this.userDetails)||void 0===n?void 0:n.id,text:null===(i=this.textForm.get("text"))||void 0===i?void 0:i.value};this.httpService.put(v.n.UserTemplates,a).subscribe(r=>{var m,p;const X=null===(m=null==r?void 0:r.data)||void 0===m?void 0:m.uuid;this.downloadTemplateService.download(t,"preview",X,null===(p=this.textForm.get("text"))||void 0===p?void 0:p.value)},r=>{console.log(r)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gz),e.Y36(c.qu),e.Y36(f.O),e.Y36(Z.e),e.Y36(N.g),e.Y36(B.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view"]],decls:20,vars:7,consts:[[1,"row","mb-4"],[1,"col"],[1,"page-title","mb-0","ps-4",3,"routerLink"],["class","fw-bold",4,"ngIf"],["class","ms-2",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-12","col-sm-12","d-flex","justify-content-end"],[1,"btn-group"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-file-earmark-word-fill"],[1,"col-12","col-sm-12"],["formControlName","text",3,"config"],[1,"fw-bold"],[1,"ms-2"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h5",2),e._uU(3),e.YNc(4,$,2,1,"span",3),e.YNc(5,k,2,1,"span",4),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"form",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"button",11),e.NdJ("click",function(){return n.download("doc")}),e._UZ(13,"i",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",5),e.TgZ(15,"div",13),e._UZ(16,"ckeditor",14),e.qZA(),e.qZA(),e.TgZ(17,"div",5),e.TgZ(18,"div",6),e._UZ(19,"hr"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(6,Q)),e.xp6(1),e.hij(" ",n.labels.View," "),e.xp6(1),e.Q6J("ngIf",n.userTemplateUuid),e.xp6(1),e.Q6J("ngIf",n.filename),e.xp6(3),e.Q6J("formGroup",n.textForm),e.xp6(8),e.Q6J("config",n.editorConfig))},directives:[u.rH,d.O5,c._Y,c.JL,c.sg,D.u,c.JJ,c.u],styles:[".cke_editable[_ngcontent-%COMP%]{padding:96px}"]}),o})()}]}];let R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,u.Bz.forChild(j)],u.Bz]}),o})(),z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,R,x.m]]}),o})()}}]);