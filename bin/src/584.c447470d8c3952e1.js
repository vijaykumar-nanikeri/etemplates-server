"use strict";(self.webpackChunketemplates=self.webpackChunketemplates||[]).push([[584],{9584:(ye,S,c)=>{c.r(S),c.d(S,{CategoriesModule:()=>_e});var u=c(9808),Q=c(9192),p=c(9127),e=c(4893);let $=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},directives:[p.lC],styles:[""]}),o})();var s=c(2382),T=c(7579),A=c(5698),M=c(4999),q=c(1884),w=c(9057),N=c(288),d=c(4995),h=(()=>((h||(h={})).SearchPlaceholder="Category...",h))(),b=(()=>{return(o=b||(b={})).Title="Add Category",o.CategoryName="Category Name",o.CategoryNamePlaceholder="Category Name",o.Cancel="Cancel",o.Add="Add",b;var o})(),_=(()=>{return(o=_||(_={})).Title="Edit Category",o.CategoryName="Category Name",o.CategoryNamePlaceholder="Category Name",o.Cancel="Cancel",o.Update="Update",_;var o})(),y=(()=>{return(o=y||(y={})).Title="Delete Category",o.Text="",o.CancelButton="Cancel",o.ConfirmButton="Yes, Delete",y;var o})();const j=[{code:"sno",name:"S.No."},{code:"category",name:"Category"},{code:"subcategories",name:"Subcategories"},{code:"createdBy",name:"Created by"},{code:"createdOn",name:"Created on"},{code:"actions",name:"Actions"}];var J=c(1134),k=c(5976),F=c(6892),V=c(5850),U=c(8969);const H=function(){return[0]},Y=function(o){return[2,o]},R=function(o,a){return{"text-end":o,"text-center":a}};function O(o,a){if(1&o&&(e.TgZ(0,"th",15),e._uU(1),e.qZA()),2&o){const t=a.$implicit,i=a.index,n=e.oxw();e.Q6J("ngClass",e.WLB(5,R,e.DdM(2,H).includes(i),e.VKq(3,Y,n.categoriesThead.length-1).includes(i))),e.xp6(1),e.hij(" ",t.name," ")}}function P(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"td",16),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.uIk("colspan",t.categoriesThead.length),e.xp6(1),e.hij(" ",t.homeLabels.NoRecordsFound," ")}}function B(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",18),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",19),e.TgZ(6,"button",20),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).viewSubcategories(l)}),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"formatDate"),e.qZA(),e.TgZ(13,"td",19),e.TgZ(14,"button",21),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2),g=e.MAs(18);return r.openEditCategoryModal(g,l)}),e._UZ(15,"i",22),e.qZA(),e.TgZ(16,"button",23),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).openDeleteCategoryModal(l)}),e._UZ(17,"i",24),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(3),e.hij(" ",t.subcategories," "),e.xp6(2),e.Oqu(t.createdBy),e.xp6(2),e.Oqu(e.xi3(12,5,t.createdOn,"DMY"))}}function W(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,B,18,8,"tr",17),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.categories)}}function z(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAddCategoryModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",28),e.ynx(5,29),e.TgZ(6,"div",30),e.TgZ(7,"label",31),e._uU(8),e.TgZ(9,"span",32),e._uU(10,"*"),e.qZA(),e.qZA(),e._UZ(11,"input",33),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"div",34),e.TgZ(13,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelAddCategoryModal()}),e._uU(14),e.qZA(),e.TgZ(15,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().addCategory()}),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.addCategoryModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.addCategoryForm),e.xp6(3),e.hij(" ",t.addCategoryModalLabels.CategoryName," "),e.xp6(3),e.Q6J("placeholder",t.addCategoryModalLabels.CategoryNamePlaceholder),e.xp6(3),e.hij(" ",t.addCategoryModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.addCategoryForm.valid),e.xp6(1),e.hij(" ",t.addCategoryModalLabels.Add," ")}}function X(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",25),e.TgZ(1,"div",26),e._uU(2),e.qZA(),e.TgZ(3,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEditCategoryModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",28),e.ynx(5,29),e.TgZ(6,"div",30),e.TgZ(7,"label",31),e._uU(8),e.TgZ(9,"span",32),e._uU(10,"*"),e.qZA(),e.qZA(),e._UZ(11,"input",33),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"div",34),e.TgZ(13,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditCategoryModal()}),e._uU(14),e.qZA(),e.TgZ(15,"button",36),e.NdJ("click",function(){return e.CHM(t),e.oxw().editCategory()}),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.editCategoryModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.editCategoryForm),e.xp6(3),e.hij(" ",t.editCategoryModalLabels.CategoryName," "),e.xp6(3),e.Q6J("placeholder",t.editCategoryModalLabels.CategoryNamePlaceholder),e.xp6(3),e.hij(" ",t.editCategoryModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.editCategoryForm.valid),e.xp6(1),e.hij(" ",t.editCategoryModalLabels.Update," ")}}let K=(()=>{class o{constructor(t,i,n,l,r,g){this.router=t,this.fb=i,this.modalService=n,this.toastService=l,this.httpService=r,this.authService=g,this.categoriesThead=[],this.categories=[],this.searchModel="",this.searchModelChanged=new T.x,this.searchModelChanged.pipe((0,M.b)(500),(0,q.x)()).subscribe(m=>{this.searchModel=m,this.getCategories()})}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.homeLabels=N.n,this.labels=h,this.addCategoryModalLabels=b,this.editCategoryModalLabels=_,this.deleteCategoryModalLabels=y,this.categoriesThead=j,this.getCategories(),this.addCategoryForm=this.fb.group({categoryName:["",[s.kI.required]]}),this.editCategoryForm=this.fb.group({categoryId:[null,[s.kI.required]],categoryName:["",[s.kI.required]]})}onSearchModelChange(t=""){this.searchModelChanged.next(t)}getCategories(){let t=null;t=this.searchModel?this.httpService.post(d.n.SearchCategories,{searchText:this.searchModel}):this.httpService.get(d.n.Categories),t&&t.subscribe(i=>{this.categories=null==i?void 0:i.data},i=>{console.log(i)})}openAddCategoryModal(t){this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancelAddCategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.addCategoryForm.reset()}closeAddCategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.addCategoryForm.reset()}addCategory(){var t;const i={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,name:this.addCategoryForm.controls.categoryName.value};this.httpService.post(d.n.Categories,i).subscribe(n=>{(null==n?void 0:n.message)&&this.toastService.success(null==n?void 0:n.message),this.getCategories()},n=>{console.log(n)},()=>{var n;null===(n=this.modalRef)||void 0===n||n.hide(),this.addCategoryForm.reset()})}openEditCategoryModal(t,i){this.editCategoryForm.controls.categoryName.setValue(null==i?void 0:i.name),this.editCategoryForm.controls.categoryId.setValue(null==i?void 0:i.id),this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancelEditCategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editCategoryForm.reset()}closeEditCategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editCategoryForm.reset()}editCategory(){var t;const i={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,id:this.editCategoryForm.controls.categoryId.value,name:this.editCategoryForm.controls.categoryName.value};this.httpService.put(d.n.Categories,i).subscribe(n=>{(null==n?void 0:n.message)&&this.toastService.success(null==n?void 0:n.message),this.getCategories()},n=>{console.log(n)},()=>{var n;null===(n=this.modalRef)||void 0===n||n.hide(),this.editCategoryForm.reset()})}openDeleteCategoryModal(t){this.modalRef=this.modalService.show(w.X,{initialState:{title:this.deleteCategoryModalLabels.Title,text:`Are you sure you want to delete${(null==t?void 0:t.name)&&" <strong>"+(null==t?void 0:t.name)+"</strong>"}?`,cancelButton:this.deleteCategoryModalLabels.CancelButton,confirmButton:this.deleteCategoryModalLabels.ConfirmButton,confirmButtonClass:"btn-danger"},class:"modal-dialog-centered"}),this.modalRef.content.outputEmitter.pipe((0,A.q)(1)).subscribe(n=>{n&&this.deleteCategory(t)})}deleteCategory(t){const i=null==t?void 0:t.id;i&&this.httpService.delete(`${d.n.Categories}/${i}`).subscribe(n=>{(null==n?void 0:n.message)&&this.toastService.success(null==n?void 0:n.message),this.getCategories()},n=>{console.log(n)},()=>{var n;null===(n=this.modalRef)||void 0===n||n.hide()})}viewSubcategories(t){this.router.navigate(["/home/categories",t.id])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.F0),e.Y36(s.qu),e.Y36(J.tT),e.Y36(k.jE),e.Y36(F.O),e.Y36(V.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-all"]],decls:19,vars:5,consts:[[1,"row","mb-3"],[1,"col-12","col-md-8","col-lg-6","mb-3","mb-md-0"],["type","text",1,"form-control","input-search","ps-5","bg-transparent","border-0","border-bottom",3,"placeholder","ngModel","ngModelChange"],[1,"col-12","col-md-4","col-lg-6","d-flex","justify-content-end"],["type","button",1,"btn","lh-1","p-0",3,"click"],[1,"bi","bi-plus-circle","fs-3","text-muted"],[1,"row"],[1,"col-12"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["addCategoryModalTemplate",""],["editCategoryModalTemplate",""],[3,"ngClass"],[1,"text-center","fw-bold"],[4,"ngFor","ngForOf"],["scope","row",1,"text-end"],[1,"text-center"],["type","button",1,"btn","btn-link","p-0","fw-bold",3,"click"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-link","p-0","ms-2",3,"click"],[1,"bi","bi-trash","text-danger"],[1,"modal-header","px-5","pt-5","border-bottom-0"],[1,"modal-title","fs-6"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","px-5"],[3,"formGroup"],[1,"mb-3"],["for","categoryName",1,"form-label","fw-bold"],[1,"text-danger"],["type","text","id","categoryName","formControlName","categoryName",1,"form-control",3,"placeholder"],[1,"modal-footer","px-5","pb-5","border-top-0"],["type","button",1,"btn","btn-link","btn-sm","text-reset","text-uppercase","text-decoration-none",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","text-uppercase",3,"disabled","click"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"input",2),e.NdJ("ngModelChange",function(r){return i.searchModel=r})("ngModelChange",function(r){return i.onSearchModelChange(r)}),e.qZA(),e.qZA(),e.TgZ(3,"div",3),e.TgZ(4,"button",4),e.NdJ("click",function(){e.CHM(n);const r=e.MAs(16);return i.openAddCategoryModal(r)}),e._UZ(5,"i",5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"div",7),e.TgZ(8,"div",8),e.TgZ(9,"table",9),e.TgZ(10,"thead",10),e.TgZ(11,"tr"),e.YNc(12,O,2,8,"th",11),e.qZA(),e.qZA(),e.YNc(13,P,4,2,"tbody",12),e.YNc(14,W,2,1,"tbody",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(15,z,17,7,"ng-template",null,13,e.W1O),e.YNc(17,X,17,7,"ng-template",null,14,e.W1O)}2&t&&(e.xp6(2),e.Q6J("placeholder",i.labels.SearchPlaceholder)("ngModel",i.searchModel),e.xp6(10),e.Q6J("ngForOf",i.categoriesThead),e.xp6(1),e.Q6J("ngIf",!i.categories.length),e.xp6(1),e.Q6J("ngIf",i.categories.length>0))},directives:[s.Fj,s.JJ,s.On,u.sg,u.mk,u.O5,s.JL,s.sg,s.u],pipes:[U.i],styles:[""]}),o})();var C=(()=>((C||(C={})).SearchPlaceholder="Subcategory...",C))(),v=(()=>{return(o=v||(v={})).Title="Add Subcategory",o.SubcategoryName="Subcategory Name",o.SubcategoryNamePlaceholder="Subcategory Name",o.Cancel="Cancel",o.Add="Add",v;var o})(),Z=(()=>{return(o=Z||(Z={})).Title="Edit Subcategory",o.SubcategoryName="Subcategory Name",o.SubcategoryNamePlaceholder="Subcategory Name",o.Cancel="Cancel",o.Update="Update",Z;var o})(),x=(()=>{return(o=x||(x={})).Title="Delete Subcategory",o.Text="",o.CancelButton="Cancel",o.ConfirmButton="Yes, Delete",x;var o})(),f=(()=>{return(o=f||(f={})).Title="Templates",o.SearchPlaceholder="Template...",o.Close="Close",f;var o})();const L=[{code:"sno",name:"S.No."},{code:"subcategory",name:"Subcategory"},{code:"types",name:"Types"},{code:"templates",name:"Templates"},{code:"createdBy",name:"Created by"},{code:"createdOn",name:"Created on"},{code:"actions",name:"Actions"}],G=[{code:"sno",name:"S.No."},{code:"template",name:"Template"},{code:"createdBy",name:"Created by"},{code:"createdOn",name:"Created on"}],I=function(){return[0]},D=function(o){return[2,3,o]},E=function(o,a){return{"text-end":o,"text-center":a}};function ee(o,a){if(1&o&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit,i=a.index,n=e.oxw();e.Q6J("ngClass",e.WLB(5,E,e.DdM(2,I).includes(i),e.VKq(3,D,n.subcategoriesThead.length-1).includes(i))),e.xp6(1),e.hij(" ",t.name," ")}}function te(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"td",20),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.uIk("colspan",t.subcategoriesThead.length),e.xp6(1),e.hij(" ",t.homeLabels.NoRecordsFound," ")}}function oe(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.templates," ")}}function ne(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,l=e.oxw(2),r=e.MAs(24);return l.openTemplatesModal(r,n)}),e._uU(1),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.templates," ")}}function ie(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",22),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",23),e._uU(6),e.qZA(),e.TgZ(7,"td",23),e.YNc(8,oe,2,1,"ng-container",15),e.YNc(9,ne,2,1,"button",24),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.ALo(14,"formatDate"),e.qZA(),e.TgZ(15,"td",23),e.TgZ(16,"button",25),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw(2),g=e.MAs(22);return r.openEditSubcategoryModal(g,l)}),e._UZ(17,"i",26),e.qZA(),e.TgZ(18,"button",27),e.NdJ("click",function(){const l=e.CHM(t).$implicit;return e.oxw(2).openDeleteSubcategoryModal(l)}),e._UZ(19,"i",28),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.types),e.xp6(2),e.Q6J("ngIf",!t.templates),e.xp6(1),e.Q6J("ngIf",t.templates),e.xp6(2),e.Oqu(t.createdBy),e.xp6(2),e.Oqu(e.xi3(14,7,t.createdOn,"DMY"))}}function ae(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,ie,20,10,"tr",21),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.subcategories)}}function le(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",31),e._uU(2),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAddSubcategoryModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",33),e.ynx(5,34),e.TgZ(6,"div",35),e.TgZ(7,"label",36),e._uU(8),e.TgZ(9,"span",37),e._uU(10,"*"),e.qZA(),e.qZA(),e._UZ(11,"input",38),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"div",39),e.TgZ(13,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelAddSubcategoryModal()}),e._uU(14),e.qZA(),e.TgZ(15,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().addSubcategory()}),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.addSubcategoryModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.addSubcategoryForm),e.xp6(3),e.hij(" ",t.addSubcategoryModalLabels.SubcategoryName," "),e.xp6(3),e.Q6J("placeholder",t.addSubcategoryModalLabels.SubcategoryNamePlaceholder),e.xp6(3),e.hij(" ",t.addSubcategoryModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.addSubcategoryForm.valid),e.xp6(1),e.hij(" ",t.addSubcategoryModalLabels.Add," ")}}function re(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",31),e._uU(2),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEditSubcategoryModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",33),e.ynx(5,34),e.TgZ(6,"div",35),e.TgZ(7,"label",36),e._uU(8),e.TgZ(9,"span",37),e._uU(10,"*"),e.qZA(),e.qZA(),e._UZ(11,"input",38),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"div",39),e.TgZ(13,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditSubcategoryModal()}),e._uU(14),e.qZA(),e.TgZ(15,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().editSubcategory()}),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.editSubcategoryModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.editSubcategoryForm),e.xp6(3),e.hij(" ",t.editSubcategoryModalLabels.SubcategoryName," "),e.xp6(3),e.Q6J("placeholder",t.editSubcategoryModalLabels.SubcategoryNamePlaceholder),e.xp6(3),e.hij(" ",t.editSubcategoryModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.editSubcategoryForm.valid),e.xp6(1),e.hij(" ",t.editSubcategoryModalLabels.Update," ")}}const se=function(o){return{"text-end":o}};function ce(o,a){if(1&o&&(e.TgZ(0,"th",19),e._uU(1),e.qZA()),2&o){const t=a.$implicit,i=a.index;e.Q6J("ngClass",e.VKq(3,se,e.DdM(2,I).includes(i))),e.xp6(1),e.hij(" ",t.name," ")}}function de(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"td",20),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.uIk("colspan",t.templatesThead.length),e.xp6(1),e.hij(" ",t.homeLabels.NoRecordsFound," ")}}function ue(o,a){if(1&o&&(e.TgZ(0,"tr"),e.TgZ(1,"th",22),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"formatDate"),e.qZA(),e.qZA()),2&o){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.createdBy),e.xp6(2),e.Oqu(e.xi3(9,4,t.createdOn,"DMY"))}}function ge(o,a){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,ue,10,7,"tr",21),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.templates)}}function me(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",30),e.TgZ(1,"div",31),e._uU(2),e.qZA(),e.TgZ(3,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeTemplatesModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",33),e.TgZ(5,"div",3),e.TgZ(6,"div",42),e.TgZ(7,"input",5),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().templateSearchModel=n})("ngModelChange",function(n){return e.CHM(t),e.oxw().onTemplateSearchModelChange(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",9),e.TgZ(9,"div",10),e.TgZ(10,"div",11),e.TgZ(11,"table",12),e.TgZ(12,"thead",13),e.TgZ(13,"tr"),e.YNc(14,ce,2,5,"th",14),e.qZA(),e.qZA(),e.YNc(15,de,4,2,"tbody",15),e.YNc(16,ge,2,1,"tbody",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(17,"div",39),e.TgZ(18,"button",40),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeTemplatesModal()}),e._uU(19),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.hij(" ",t.subcategoryName||t.templatesModalLabels.Title," "),e.xp6(5),e.Q6J("placeholder",t.templatesModalLabels.SearchPlaceholder)("ngModel",t.templateSearchModel),e.xp6(7),e.Q6J("ngForOf",t.templatesThead),e.xp6(1),e.Q6J("ngIf",!t.templates.length),e.xp6(1),e.Q6J("ngIf",t.templates.length>0),e.xp6(3),e.hij(" ",t.templatesModalLabels.Close," ")}}const pe=function(){return["/home/categories/view-all"]},he=[{path:"",component:$,children:[{path:"view-all",component:K},{path:":id",component:(()=>{class o{constructor(t,i,n,l,r,g){this.route=t,this.fb=i,this.modalService=n,this.toastService=l,this.httpService=r,this.authService=g,this.categoryId=0,this.categoryName="",this.subcategoryId=0,this.subcategoryName="",this.subcategoriesThead=[],this.subcategories=[],this.templatesThead=[],this.templates=[],this.searchModel="",this.searchModelChanged=new T.x,this.templateSearchModel="",this.templateSearchModelChanged=new T.x,this.route.params.subscribe(m=>{this.categoryId=+m.id,this.categoryId&&(this.getCategory(),this.getSubcategories())}),this.searchModelChanged.pipe((0,M.b)(500),(0,q.x)()).subscribe(m=>{this.searchModel=m,this.getSubcategories()}),this.templateSearchModelChanged.pipe((0,M.b)(500),(0,q.x)()).subscribe(m=>{this.templateSearchModel=m,this.getTemplates()})}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.homeLabels=N.n,this.labels=C,this.addSubcategoryModalLabels=v,this.editSubcategoryModalLabels=Z,this.deleteSubcategoryModalLabels=x,this.templatesModalLabels=f,this.subcategoriesThead=L,this.templatesThead=G,this.addSubcategoryForm=this.fb.group({subcategoryName:["",[s.kI.required]]}),this.editSubcategoryForm=this.fb.group({subcategoryId:[null,[s.kI.required]],subcategoryName:["",[s.kI.required]]})}onSearchModelChange(t=""){this.searchModelChanged.next(t)}onTemplateSearchModelChange(t=""){this.templateSearchModelChanged.next(t)}getCategory(){this.httpService.get(`${d.n.Categories}/${this.categoryId}`).subscribe(t=>{this.categoryName=null==t?void 0:t.data[0].name},t=>{console.log(t)})}getSubcategories(){let t=null;t=this.searchModel?this.httpService.post(`${d.n.Categories}/${this.categoryId}/${d.n.SearchSubcategories}`,{searchText:this.searchModel}):this.httpService.get(`${d.n.Categories}/${this.categoryId}/${d.n.Subcategories}`),t&&t.subscribe(i=>{this.subcategories=null==i?void 0:i.data},i=>{console.log(i)})}openAddSubcategoryModal(t){this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancelAddSubcategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.addSubcategoryForm.reset()}closeAddSubcategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.addSubcategoryForm.reset()}addSubcategory(){var t;const i={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,categoryId:this.categoryId,name:this.addSubcategoryForm.controls.subcategoryName.value};this.httpService.post(d.n.Subcategories,i).subscribe(n=>{(null==n?void 0:n.message)&&this.toastService.success(null==n?void 0:n.message),this.getSubcategories()},n=>{console.log(n)},()=>{var n;null===(n=this.modalRef)||void 0===n||n.hide(),this.addSubcategoryForm.reset()})}openEditSubcategoryModal(t,i){this.editSubcategoryForm.controls.subcategoryName.setValue(null==i?void 0:i.name),this.editSubcategoryForm.controls.subcategoryId.setValue(null==i?void 0:i.id),this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancelEditSubcategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editSubcategoryForm.reset()}closeEditSubcategoryModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editSubcategoryForm.reset()}editSubcategory(){var t;const i={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,id:this.editSubcategoryForm.controls.subcategoryId.value,name:this.editSubcategoryForm.controls.subcategoryName.value};this.httpService.put(`${d.n.Subcategories}`,i).subscribe(n=>{(null==n?void 0:n.message)&&this.toastService.success(null==n?void 0:n.message),this.getSubcategories()},n=>{console.log(n)},()=>{var n;null===(n=this.modalRef)||void 0===n||n.hide(),this.editSubcategoryForm.reset()})}openDeleteSubcategoryModal(t){this.modalRef=this.modalService.show(w.X,{initialState:{title:this.deleteSubcategoryModalLabels.Title,text:`Are you sure you want to delete${(null==t?void 0:t.name)&&" <strong>"+(null==t?void 0:t.name)+"</strong>"}?`,cancelButton:this.deleteSubcategoryModalLabels.CancelButton,confirmButton:this.deleteSubcategoryModalLabels.ConfirmButton,confirmButtonClass:"btn-danger"},class:"modal-dialog-centered"}),this.modalRef.content.outputEmitter.pipe((0,A.q)(1)).subscribe(n=>{n&&this.deleteSubcategory(t)})}deleteSubcategory(t){const i=null==t?void 0:t.id;i&&this.httpService.delete(`${d.n.Subcategories}/${i}`).subscribe(n=>{(null==n?void 0:n.message)&&this.toastService.success(null==n?void 0:n.message),this.getSubcategories()},n=>{console.log(n)},()=>{var n;null===(n=this.modalRef)||void 0===n||n.hide()})}openTemplatesModal(t,i){this.subcategoryId=i.id,this.subcategoryName=i.name,this.modalRef=this.modalService.show(t,{class:"modal-lg"}),this.getTemplates()}closeTemplatesModal(){var t;this.subcategoryId=0,this.subcategoryName="",null===(t=this.modalRef)||void 0===t||t.hide(),this.editSubcategoryForm.reset()}getTemplates(){var t,i;this.templates=[];let n=null;if(this.templateSearchModel){const l={searchText:this.templateSearchModel,userId:null===(t=this.userDetails)||void 0===t?void 0:t.id};n=this.httpService.post(`${d.n.Subcategories}/${this.subcategoryId}/${d.n.SearchTemplates}`,l)}else{const l={userId:null===(i=this.userDetails)||void 0===i?void 0:i.id};n=this.httpService.post(`${d.n.Subcategories}/${this.subcategoryId}/${d.n.Templates}`,l)}n&&n.subscribe(l=>{this.templates=null==l?void 0:l.data},l=>{console.log(l)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(p.gz),e.Y36(s.qu),e.Y36(J.tT),e.Y36(k.jE),e.Y36(F.O),e.Y36(V.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view"]],decls:25,vars:8,consts:[[1,"row","mb-4"],[1,"col"],[1,"page-title","mb-0","ps-4",3,"routerLink"],[1,"row","mb-3"],[1,"ccol-12","col-md-8","col-lg-6","mb-3","mb-md-0"],["type","text",1,"form-control","input-search","ps-5","bg-transparent","border-0","border-bottom",3,"placeholder","ngModel","ngModelChange"],[1,"col-12","col-md-4","col-lg-6","d-flex","justify-content-end"],["type","button",1,"btn","lh-1","p-0",3,"click"],[1,"bi","bi-plus-circle","fs-3","text-muted"],[1,"row"],[1,"col-12"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],["addSubcategoryModalTemplate",""],["editSubcategoryModalTemplate",""],["templatesModalTemplate",""],[3,"ngClass"],[1,"text-center","fw-bold"],[4,"ngFor","ngForOf"],["scope","row",1,"text-end"],[1,"text-center"],["type","button","class","btn btn-link p-0 fw-bold",3,"click",4,"ngIf"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-link","p-0","ms-2",3,"click"],[1,"bi","bi-trash","text-danger"],["type","button",1,"btn","btn-link","p-0","fw-bold",3,"click"],[1,"modal-header","px-5","pt-5","border-bottom-0"],[1,"modal-title","fs-6"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","px-5"],[3,"formGroup"],[1,"mb-3"],["for","subcategoryName",1,"form-label","fw-bold"],[1,"text-danger"],["type","text","id","subcategoryName","formControlName","subcategoryName",1,"form-control",3,"placeholder"],[1,"modal-footer","px-5","pb-5","border-top-0"],["type","button",1,"btn","btn-link","btn-sm","text-reset","text-uppercase","text-decoration-none",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","text-uppercase",3,"disabled","click"],[1,"col-12","col-md-8","mb-3","mb-md-0"]],template:function(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h5",2),e._uU(3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"input",5),e.NdJ("ngModelChange",function(r){return i.searchModel=r})("ngModelChange",function(r){return i.onSearchModelChange(r)}),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.TgZ(8,"button",7),e.NdJ("click",function(){e.CHM(n);const r=e.MAs(20);return i.openAddSubcategoryModal(r)}),e._UZ(9,"i",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"div",11),e.TgZ(13,"table",12),e.TgZ(14,"thead",13),e.TgZ(15,"tr"),e.YNc(16,ee,2,8,"th",14),e.qZA(),e.qZA(),e.YNc(17,te,4,2,"tbody",15),e.YNc(18,ae,2,1,"tbody",15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(19,le,17,7,"ng-template",null,16,e.W1O),e.YNc(21,re,17,7,"ng-template",null,17,e.W1O),e.YNc(23,me,20,7,"ng-template",null,18,e.W1O)}2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(7,pe)),e.xp6(1),e.hij(" ",i.categoryName," "),e.xp6(3),e.Q6J("placeholder",i.labels.SearchPlaceholder)("ngModel",i.searchModel),e.xp6(10),e.Q6J("ngForOf",i.subcategoriesThead),e.xp6(1),e.Q6J("ngIf",!i.subcategories.length),e.xp6(1),e.Q6J("ngIf",i.subcategories.length>0))},directives:[p.rH,s.Fj,s.JJ,s.On,u.sg,u.mk,u.O5,s.JL,s.sg,s.u],pipes:[U.i],styles:[""]}),o})()}]}];let be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,p.Bz.forChild(he)],p.Bz]}),o})(),_e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[u.ez,be,Q.m]]}),o})()}}]);