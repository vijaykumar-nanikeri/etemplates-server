"use strict";(self.webpackChunketemplates=self.webpackChunketemplates||[]).push([[502],{5502:(j,g,l)=>{l.r(g),l.d(g,{UserTemplatesModule:()=>$});var d=l(9808),Z=l(9192),c=l(9127),e=l(4893);let b=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-templates"]],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"router-outlet")},directives:[c.lC],styles:[""]}),o})();var x=l(5698),w=l(9057),U=l(288),m=l(4995),p=(()=>{return(o=p||(p={})).Title="Delete User Template",o.Text="",o.CancelButton="Cancel",o.ConfirmButton="Yes, Delete",p;var o})();const A=[{code:"sno",name:"S.No."},{code:"userTemplate",name:"User Template"},{code:"createdOn",name:"Created on"},{code:"action",name:"Action"}];var C=l(2551),y=l(5976),T=l(6892),f=l(5850),q=l(8969);const _=function(){return[0]},V=function(o){return[o]},J=function(o,s){return{"text-end":o,"text-center":s}};function F(o,s){if(1&o&&(e.TgZ(0,"th",7),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=s.index,i=e.oxw();e.Q6J("ngClass",e.WLB(5,J,e.DdM(2,_).includes(n),e.VKq(3,V,i.userTemplatesThead.length-1).includes(n))),e.xp6(1),e.hij(" ",t.name," ")}}function S(o,s){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"td",8),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.uIk("colspan",t.userTemplatesThead.length),e.xp6(1),e.hij(" ",t.homeLabels.NoRecordsFound," ")}}function Y(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",10),e._uU(2),e.qZA(),e.TgZ(3,"td"),e.TgZ(4,"button",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).view(r)}),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.ALo(8,"formatDate"),e.qZA(),e.TgZ(9,"td",12),e.TgZ(10,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.oxw(2).openDeleteUserTemplateModal(r)}),e._UZ(11,"i",14),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=s.$implicit,n=s.index;e.xp6(2),e.Oqu(n+1),e.xp6(3),e.hij(" ",t.uuid," "),e.xp6(2),e.Oqu(e.xi3(8,3,t.createdOn,"DMY"))}}function I(o,s){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,Y,12,6,"tr",9),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.userTemplates)}}let M=(()=>{class o{constructor(t,n,i,r,a){this.router=t,this.modalService=n,this.toastService=i,this.httpService=r,this.authService=a,this.userTemplatesThead=[],this.userTemplates=[]}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.homeLabels=U.n,this.deleteUserTemplateModalLabels=p,this.userTemplatesThead=A,this.getUserTemplates()}getUserTemplates(){var t;const n=null===(t=this.userDetails)||void 0===t?void 0:t.id;this.httpService.get(`${m.n.UserTemplates}/${n}/all`).subscribe(i=>{this.userTemplates=null==i?void 0:i.data},i=>{console.log(i)})}openDeleteUserTemplateModal(t){this.modalRef=this.modalService.show(w.X,{initialState:{title:this.deleteUserTemplateModalLabels.Title,text:`Are you sure you want to delete<br />${(null==t?void 0:t.uuid)&&" <strong>"+(null==t?void 0:t.uuid)+"</strong>"}?`,cancelButton:this.deleteUserTemplateModalLabels.CancelButton,confirmButton:this.deleteUserTemplateModalLabels.ConfirmButton,confirmButtonClass:"btn-danger"},class:"modal-dialog-centered"}),this.modalRef.content.outputEmitter.pipe((0,x.q)(1)).subscribe(i=>{i&&this.deleteUserTemplate(t)})}deleteUserTemplate(t){const n=null==t?void 0:t.id;n&&this.httpService.delete(`${m.n.UserTemplates}/${n}`).subscribe(i=>{(null==i?void 0:i.message)&&this.toastService.success(null==i?void 0:i.message),this.getUserTemplates()},i=>{console.log(i)},()=>{var i;null===(i=this.modalRef)||void 0===i||i.hide()})}view(t){this.router.navigate(["/home/user-templates",t.id])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.F0),e.Y36(C.tT),e.Y36(y.jE),e.Y36(T.O),e.Y36(f.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-all"]],decls:9,vars:3,consts:[[1,"row"],[1,"col-12"],[1,"table-responsive"],[1,"table"],[1,"table-primary"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[1,"text-center","fw-bold"],[4,"ngFor","ngForOf"],["scope","row",1,"text-end"],["type","button",1,"btn","btn-link","p-0","fw-bold",3,"click"],[1,"text-center"],["type","button",1,"btn","btn-link","p-0","ms-2",3,"click"],[1,"bi","bi-trash","text-danger"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"table",3),e.TgZ(4,"thead",4),e.TgZ(5,"tr"),e.YNc(6,F,2,8,"th",5),e.qZA(),e.qZA(),e.YNc(7,S,4,2,"tbody",6),e.YNc(8,I,2,1,"tbody",6),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.userTemplatesThead),e.xp6(1),e.Q6J("ngIf",!n.userTemplates.length),e.xp6(1),e.Q6J("ngIf",n.userTemplates.length>0))},directives:[d.sg,d.mk,d.O5],pipes:[q.i],styles:[""]}),o})();var h=l(6623),v=(()=>((v||(v={})).View="View",v))(),u=l(2382),O=l(5281);function N(o,s){if(1&o&&(e.TgZ(0,"span",18),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.userTemplateUuid)}}const k=function(){return["/home/user-templates/view-all"]},B=[{path:"",component:b,children:[{path:"view-all",component:M},{path:":id",component:(()=>{class o{constructor(t,n,i,r,a){this.route=t,this.fb=n,this.httpService=i,this.authService=r,this.downloadTemplateService=a,this.userTemplateId=0,this.userTemplateUuid="",this.toolbar=[[{heading:["h1","h2","h3","h4","h5","h6"]}],["bold","italic","underline","strike"],["ordered_list","bullet_list"],["align_left","align_center","align_right","align_justify"],["text_color","background_color"],["code","blockquote"]],this.route.params.subscribe(Q=>{this.userTemplateId=+Q.id,this.userTemplateId&&this.getText()})}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.labels=v,this.editor=new h.ML,this.textForm=this.fb.group({text:["",[h.kI.required]]})}ngOnDestroy(){this.editor.destroy()}getText(){this.httpService.get(`${m.n.UserTemplates}/${this.userTemplateId}`).subscribe(t=>{var n,i,r;this.userTemplateUuid=null===(n=null==t?void 0:t.data[0])||void 0===n?void 0:n.uuid,null===(i=this.textForm.get("text"))||void 0===i||i.setValue((null===(r=null==t?void 0:t.data[0])||void 0===r?void 0:r.text)||"")},t=>{console.log(t)})}download(t){var n,i;const r={userId:null===(n=this.userDetails)||void 0===n?void 0:n.id,text:null===(i=this.textForm.get("text"))||void 0===i?void 0:i.value};this.httpService.put(m.n.UserTemplates,r).subscribe(()=>{var a;this.downloadTemplateService.download(t,"preview",null===(a=this.textForm.get("text"))||void 0===a?void 0:a.value)},a=>{console.log(a)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.gz),e.Y36(u.qu),e.Y36(T.O),e.Y36(f.e),e.Y36(O.m))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view"]],decls:24,vars:8,consts:[[1,"row","mb-4"],[1,"col"],[1,"page-title","mb-0","ps-4",3,"routerLink"],["class","fw-bold",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"row","mb-3"],[1,"col-12","col-sm-12","d-flex","justify-content-end"],[1,"btn-group"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-file-earmark-word-fill"],[1,"bi","bi-file-earmark-pdf-fill"],[1,"col-12","col-sm-12"],[1,"border","overflow-auto"],[3,"editor","toolbar"],["id","preview"],["formControlName","text",3,"editor"],[1,"fw-bold"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h5",2),e._uU(3),e.YNc(4,N,2,1,"span",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"form",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"button",10),e.NdJ("click",function(){return n.download("docx")}),e._UZ(12,"i",11),e.qZA(),e.TgZ(13,"button",10),e.NdJ("click",function(){return n.download("pdf")}),e._UZ(14,"i",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(15,"div",4),e.TgZ(16,"div",13),e.TgZ(17,"div",14),e._UZ(18,"ngx-editor-menu",15),e.qZA(),e.TgZ(19,"div",16),e._UZ(20,"ngx-editor",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",4),e.TgZ(22,"div",5),e._UZ(23,"hr"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(7,k)),e.xp6(1),e.hij(" ",n.labels.View," "),e.xp6(1),e.Q6J("ngIf",n.userTemplateUuid),e.xp6(3),e.Q6J("formGroup",n.textForm),e.xp6(11),e.Q6J("editor",n.editor)("toolbar",n.toolbar),e.xp6(2),e.Q6J("editor",n.editor))},directives:[c.rH,d.O5,u._Y,u.JL,u.sg,h.Mn,h.tP,u.JJ,u.u],styles:[""]}),o})()}]}];let D=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,c.Bz.forChild(B)],c.Bz]}),o})(),$=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[d.ez,D,Z.m]]}),o})()}}]);