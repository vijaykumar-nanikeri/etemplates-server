"use strict";(self.webpackChunketemplates=self.webpackChunketemplates||[]).push([[27],{9027:(ue,Z,d)=>{d.r(Z),d.d(Z,{TemplatesModule:()=>me});var p=d(9808),A=d(9192),u=d(9127),e=d(4893);let N=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-templates"]],decls:1,vars:0,template:function(t,l){1&t&&e._UZ(0,"router-outlet")},directives:[u.lC],styles:[""]}),o})();var a=d(2382),M=d(7579),y=d(5698),J=d(4999),k=d(1884),w=d(9057),U=d(288),m=d(4995),g=(()=>{return(o=g||(g={})).SearchPlaceholder="Template...",o.CategoryPlaceholder="Select Category",o.SubcategoryPlaceholder="Select Subcategory",o.Get="Get",o.Compose="Compose",g;var o})(),h=(()=>{return(o=h||(h={})).Title="Add Template",o.TemplateName="Template Name",o.TemplateNamePlaceholder="Template Name",o.Cancel="Cancel",o.Add="Add",h;var o})(),_=(()=>{return(o=_||(_={})).Title="Edit Template",o.TemplateName="Template Name",o.TemplateNamePlaceholder="Template Name",o.Cancel="Cancel",o.Update="Update",_;var o})(),v=(()=>{return(o=v||(v={})).Title="Delete Template",o.Text="",o.CancelButton="Cancel",o.ConfirmButton="Yes, Delete",v;var o})();const Q=[{code:"sno",name:"S.No."},{code:"template",name:"Template"},{code:"createdBy",name:"Created by"},{code:"createdOn",name:"Created on"},{code:"actions",name:"Actions"},{code:"compose",name:"Compose"}];var x=d(1134),C=d(5976),F=d(6892),q=d(5850),S=d(8969);function V(o,n){if(1&o&&(e.TgZ(0,"option",5),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Y(o,n){if(1&o&&(e.TgZ(0,"option",5),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}const $=function(){return[0]},z=function(o,n){return[o,n]},I=function(o,n){return{"text-end":o,"text-center":n}};function O(o,n){if(1&o&&(e.TgZ(0,"th",22),e._uU(1),e.qZA()),2&o){const t=n.$implicit,l=n.index,i=e.oxw(2);e.Q6J("ngClass",e.WLB(6,I,e.DdM(2,$).includes(l),e.WLB(3,z,i.templatesThead.length-1,i.templatesThead.length-2).includes(l))),e.xp6(1),e.hij(" ",t.name," ")}}function j(o,n){if(1&o&&(e.TgZ(0,"tbody"),e.TgZ(1,"tr"),e.TgZ(2,"td",23),e._uU(3),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.uIk("colspan",t.templatesThead.length),e.xp6(1),e.hij(" ",t.homeLabels.NoRecordsFound," ")}}function H(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"th",25),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"formatDate"),e.qZA(),e.TgZ(10,"td",26),e.TgZ(11,"button",27),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(3),r=e.MAs(20);return c.openEditTemplateModal(r,s)}),e._UZ(12,"i",28),e.qZA(),e.TgZ(13,"button",29),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).openDeleteTemplateModal(s)}),e._UZ(14,"i",30),e.qZA(),e.qZA(),e.TgZ(15,"td",26),e.TgZ(16,"button",31),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(3).composeTemplate(s)}),e._uU(17),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=n.$implicit,l=n.index,i=e.oxw(3);e.xp6(2),e.Oqu(l+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.createdBy),e.xp6(2),e.Oqu(e.xi3(9,5,t.createdOn,"DMY")),e.xp6(9),e.hij(" ",i.labels.Compose," ")}}function R(o,n){if(1&o&&(e.TgZ(0,"tbody"),e.YNc(1,H,18,8,"tr",24),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.templates)}}function G(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2),e.TgZ(2,"div",12),e._UZ(3,"hr"),e.qZA(),e.qZA(),e.TgZ(4,"div",0),e.TgZ(5,"div",13),e.TgZ(6,"input",14),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().searchModel=i})("ngModelChange",function(i){return e.CHM(t),e.oxw().onSearchModelChange(i)}),e.qZA(),e.qZA(),e.TgZ(7,"div",15),e.TgZ(8,"button",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),s=e.MAs(18);return i.openAddTemplateModal(s)}),e._UZ(9,"i",17),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"div",2),e.TgZ(11,"div",12),e.TgZ(12,"div",18),e.TgZ(13,"table",19),e.TgZ(14,"thead",20),e.TgZ(15,"tr"),e.YNc(16,O,2,9,"th",21),e.qZA(),e.qZA(),e.YNc(17,j,4,2,"tbody",9),e.YNc(18,R,2,1,"tbody",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(6),e.Q6J("placeholder",t.labels.SearchPlaceholder)("ngModel",t.searchModel),e.xp6(10),e.Q6J("ngForOf",t.templatesThead),e.xp6(1),e.Q6J("ngIf",!t.templates.length),e.xp6(1),e.Q6J("ngIf",t.templates.length>0)}}function P(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"div",33),e._uU(2),e.qZA(),e.TgZ(3,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeAddTemplateModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",35),e.ynx(5,36),e.TgZ(6,"div",37),e.TgZ(7,"label",38),e._uU(8),e.TgZ(9,"span",39),e._uU(10,"*"),e.qZA(),e.qZA(),e._UZ(11,"input",40),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"div",41),e.TgZ(13,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelAddTemplateModal()}),e._uU(14),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().addTemplate()}),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.addTemplateModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.addTemplateForm),e.xp6(3),e.hij(" ",t.addTemplateModalLabels.TemplateName," "),e.xp6(3),e.Q6J("placeholder",t.addTemplateModalLabels.TemplateNamePlaceholder),e.xp6(3),e.hij(" ",t.addTemplateModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.addTemplateForm.valid),e.xp6(1),e.hij(" ",t.addTemplateModalLabels.Add," ")}}function W(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",32),e.TgZ(1,"div",33),e._uU(2),e.qZA(),e.TgZ(3,"button",34),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEditTemplateModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",35),e.ynx(5,36),e.TgZ(6,"div",37),e.TgZ(7,"label",38),e._uU(8),e.TgZ(9,"span",39),e._uU(10,"*"),e.qZA(),e.qZA(),e._UZ(11,"input",40),e.qZA(),e.BQk(),e.qZA(),e.TgZ(12,"div",41),e.TgZ(13,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditTemplateModal()}),e._uU(14),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return e.CHM(t),e.oxw().editTemplate()}),e._uU(16),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.editTemplateModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.editTemplateForm),e.xp6(3),e.hij(" ",t.editTemplateModalLabels.TemplateName," "),e.xp6(3),e.Q6J("placeholder",t.editTemplateModalLabels.TemplateNamePlaceholder),e.xp6(3),e.hij(" ",t.editTemplateModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.editTemplateForm.valid),e.xp6(1),e.hij(" ",t.editTemplateModalLabels.Update," ")}}let X=(()=>{class o{constructor(t,l,i,s,c,r){this.router=t,this.fb=l,this.modalService=i,this.toastService=s,this.httpService=c,this.authService=r,this.categories=[],this.subcategories=[],this.categoryModel=0,this.subcategoryModel=0,this.isGetClicked=!1,this.templatesThead=[],this.templates=[],this.searchModel="",this.searchModelChanged=new M.x,this.searchModelChanged.pipe((0,J.b)(500),(0,k.x)()).subscribe(f=>{this.searchModel=f,this.getTemplates()})}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.homeLabels=U.n,this.labels=g,this.addTemplateModalLabels=h,this.editTemplateModalLabels=_,this.deleteTemplateModalLabels=v,this.templatesThead=Q,this.getCategories(),this.addTemplateForm=this.fb.group({templateName:["",[a.kI.required]]}),this.editTemplateForm=this.fb.group({templateId:[null,[a.kI.required]],templateName:["",[a.kI.required]]})}getCategories(){this.httpService.get(m.n.Categories).subscribe(t=>{this.categories=null==t?void 0:t.data},t=>{console.log(t)})}onCategoryModelChange(t){this.subcategoryModel=0,this.subcategories=[],t&&this.getSubcategories(t)}getSubcategories(t){this.httpService.get(`${m.n.Categories}/${t}/${m.n.Subcategories}`).subscribe(l=>{this.subcategories=null==l?void 0:l.data},l=>{console.log(l)})}onSubcategoryModelChange(t){this.templates=[],this.subcategoryModel=t,this.isGetClicked=!1}onSearchModelChange(t=""){this.searchModelChanged.next(t)}getTemplates(){var t,l;if(this.isGetClicked=!0,this.templates=[],this.subcategoryModel){let i=null;if(this.searchModel){const s={searchText:this.searchModel,userId:null===(t=this.userDetails)||void 0===t?void 0:t.id};i=this.httpService.post(`${m.n.Subcategories}/${this.subcategoryModel}/${m.n.SearchTemplates}`,s)}else{const s={userId:null===(l=this.userDetails)||void 0===l?void 0:l.id};i=this.httpService.post(`${m.n.Subcategories}/${this.subcategoryModel}/${m.n.Templates}`,s)}i&&i.subscribe(s=>{this.templates=null==s?void 0:s.data},s=>{console.log(s)})}}openAddTemplateModal(t){this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancelAddTemplateModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.addTemplateForm.reset()}closeAddTemplateModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.addTemplateForm.reset()}addTemplate(){var t;const l={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,subcategoryId:this.subcategoryModel,name:this.addTemplateForm.controls.templateName.value};this.httpService.post(m.n.Templates,l).subscribe(i=>{(null==i?void 0:i.message)&&this.toastService.success(null==i?void 0:i.message),this.getTemplates()},i=>{console.log(i)},()=>{var i;null===(i=this.modalRef)||void 0===i||i.hide(),this.addTemplateForm.reset()})}openEditTemplateModal(t,l){this.editTemplateForm.controls.templateName.setValue(null==l?void 0:l.name),this.editTemplateForm.controls.templateId.setValue(null==l?void 0:l.id),this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered"})}cancelEditTemplateModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editTemplateForm.reset()}closeEditTemplateModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editTemplateForm.reset()}editTemplate(){var t;const l={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,id:this.editTemplateForm.controls.templateId.value,name:this.editTemplateForm.controls.templateName.value};this.httpService.put(`${m.n.Templates}`,l).subscribe(i=>{(null==i?void 0:i.message)&&this.toastService.success(null==i?void 0:i.message),this.getTemplates()},i=>{console.log(i)},()=>{var i;null===(i=this.modalRef)||void 0===i||i.hide(),this.editTemplateForm.reset()})}openDeleteTemplateModal(t){this.modalRef=this.modalService.show(w.X,{initialState:{title:this.deleteTemplateModalLabels.Title,text:`Are you sure you want to delete${(null==t?void 0:t.name)&&" <strong>"+(null==t?void 0:t.name)+"</strong>"}?`,cancelButton:this.deleteTemplateModalLabels.CancelButton,confirmButton:this.deleteTemplateModalLabels.ConfirmButton,confirmButtonClass:"btn-danger"},class:"modal-dialog-centered"}),this.modalRef.content.outputEmitter.pipe((0,y.q)(1)).subscribe(i=>{i&&this.deleteTemplate(t)})}deleteTemplate(t){const l=null==t?void 0:t.id;l&&this.httpService.delete(`${m.n.Templates}/${l}`).subscribe(i=>{(null==i?void 0:i.message)&&this.toastService.success(null==i?void 0:i.message),this.getTemplates()},i=>{console.log(i)},()=>{var i;null===(i=this.modalRef)||void 0===i||i.hide()})}composeTemplate(t){this.router.navigate(["/home/templates",t.id])}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.F0),e.Y36(a.qu),e.Y36(x.tT),e.Y36(C.jE),e.Y36(F.O),e.Y36(q.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-view-all"]],decls:21,vars:11,consts:[[1,"row","mb-3"],[1,"col-12","col-md-8","col-lg-6"],[1,"row"],[1,"col-12","col-md-5","mb-3","mb-md-0"],[1,"form-select",3,"ngModel","ngModelChange"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-md-2","mb-3","mb-md-0","d-grid"],["type","button",1,"btn","btn-primary","btn-sm","text-uppercase",3,"disabled","click"],[4,"ngIf"],["addTemplateModalTemplate",""],["editTemplateModalTemplate",""],[1,"col-12"],[1,"col-12","col-md-8","col-lg-6","mb-3","mb-md-0"],["type","text",1,"form-control","input-search","ps-5","bg-transparent","border-0","border-bottom",3,"placeholder","ngModel","ngModelChange"],[1,"col-12","col-md-4","col-lg-6","d-flex","justify-content-end"],["type","button",1,"btn","lh-1","p-0",3,"click"],[1,"bi","bi-plus-circle","fs-3","text-muted"],[1,"table-responsive"],[1,"table","align-baseline"],[1,"table-primary"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"text-center","fw-bold"],[4,"ngFor","ngForOf"],["scope","row",1,"text-end"],[1,"text-center"],["type","button",1,"btn","btn-link","p-0",3,"click"],[1,"bi","bi-pencil"],["type","button",1,"btn","btn-link","p-0","ms-2",3,"click"],[1,"bi","bi-trash","text-danger"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"modal-header","px-5","pt-5","border-bottom-0"],[1,"modal-title","fs-6"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","px-5"],[3,"formGroup"],[1,"mb-3"],["for","templateName",1,"form-label","fw-bold"],[1,"text-danger"],["type","text","id","templateName","formControlName","templateName",1,"form-control",3,"placeholder"],[1,"modal-footer","px-5","pb-5","border-top-0"],["type","button",1,"btn","btn-link","btn-sm","text-reset","text-uppercase","text-decoration-none",3,"click"]],template:function(t,l){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"select",4),e.NdJ("ngModelChange",function(s){return l.categoryModel=s})("ngModelChange",function(s){return l.onCategoryModelChange(s)}),e.TgZ(5,"option",5),e._uU(6),e.qZA(),e.YNc(7,V,2,2,"option",6),e.qZA(),e.qZA(),e.TgZ(8,"div",3),e.TgZ(9,"select",4),e.NdJ("ngModelChange",function(s){return l.subcategoryModel=s})("ngModelChange",function(s){return l.onSubcategoryModelChange(s)}),e.TgZ(10,"option",5),e._uU(11),e.qZA(),e.YNc(12,Y,2,2,"option",6),e.qZA(),e.qZA(),e.TgZ(13,"div",7),e.TgZ(14,"button",8),e.NdJ("click",function(){return l.getTemplates()}),e._uU(15),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,G,19,5,"ng-container",9),e.YNc(17,P,17,7,"ng-template",null,10,e.W1O),e.YNc(19,W,17,7,"ng-template",null,11,e.W1O)),2&t&&(e.xp6(4),e.Q6J("ngModel",l.categoryModel),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.Oqu(l.labels.CategoryPlaceholder),e.xp6(1),e.Q6J("ngForOf",l.categories),e.xp6(2),e.Q6J("ngModel",l.subcategoryModel),e.xp6(1),e.Q6J("value",0),e.xp6(1),e.Oqu(l.labels.SubcategoryPlaceholder),e.xp6(1),e.Q6J("ngForOf",l.subcategories),e.xp6(2),e.Q6J("disabled",!(l.categoryModel&&l.subcategoryModel)),e.xp6(1),e.hij(" ",l.labels.Get," "),e.xp6(1),e.Q6J("ngIf",l.subcategoryModel&&l.isGetClicked))},directives:[a.EJ,a.JJ,a.On,a.YN,a.Kr,p.sg,p.O5,a.Fj,p.mk,a.JL,a.sg,a.u],pipes:[S.i],styles:[""]}),o})();var T=(()=>{return(o=T||(T={})).Compose="Compose",o.FieldName="Field Name",o.FieldNamePlaceholder="Field Name",o.FieldNotes="Field Notes",o.FieldNotesPlaceholder="Field Notes",o.FieldSize="Field Size",o.Add="Add",o.TextAndConfig="Text & Config",o.Submit="Submit",T;var o})(),b=(()=>{return(o=b||(b={})).Title="Edit Field",o.FieldName="Field Name",o.FieldNamePlaceholder="Field Name",o.FieldNotes="Field Notes",o.FieldNotesPlaceholder="Field Notes",o.FieldSize="Field Size",o.Cancel="Cancel",o.Update="Update",b;var o})();const K=[{code:"normal",name:"Normal",value:0},{code:"large",name:"Large",value:1}];var B=d(1792),D=d(6590);function E(o,n){if(1&o&&(e.TgZ(0,"span",26),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.templateName)}}function L(o,n){1&o&&e._UZ(0,"option",27),2&o&&e.Q6J("value",n.$implicit.name)}function ee(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"input",28),e.TgZ(2,"label",29),e._uU(3),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("id",t.code)("value",t.value),e.xp6(1),e.Q6J("for",t.code),e.xp6(1),e.Oqu(t.name)}}function te(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"h5",36),e.TgZ(1,"span",37),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",38),e.TgZ(5,"i",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).manageField("edit",i)}),e.qZA(),e.qZA(),e.TgZ(6,"div",38),e.TgZ(7,"i",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),s=i.$implicit,c=i.index;return e.oxw(2).manageField("remove",s,c)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&o){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.value.name)}}function oe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"h5",41),e.TgZ(1,"span",42),e.TgZ(2,"div"),e._UZ(3,"input",43),e.qZA(),e.TgZ(4,"div",38),e.TgZ(5,"i",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).manageField("update",i)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}}function le(o,n){if(1&o&&(e.ynx(0),e.ynx(1,33),e.YNc(2,te,8,1,"h5",34),e.YNc(3,oe,6,0,"h5",35),e.BQk(),e.BQk()),2&o){const t=n.$implicit,l=n.index;e.xp6(1),e.Q6J("formGroupName",l),e.xp6(1),e.Q6J("ngIf",!t.value.isEdit),e.xp6(1),e.Q6J("ngIf",t.value.isEdit)}}function ie(o,n){if(1&o&&(e.TgZ(0,"div",1),e.TgZ(1,"form",30),e.TgZ(2,"div",4),e.TgZ(3,"div",31),e.ynx(4,32),e.YNc(5,le,4,3,"ng-container",16),e.BQk(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.fieldsForm),e.xp6(4),e.Q6J("ngForOf",t.fields.controls)}}function ne(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"input",28),e.TgZ(2,"label",29),e._uU(3),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("id",t.code)("value",t.value),e.xp6(1),e.Q6J("for",t.code),e.xp6(1),e.Oqu(t.name)}}function se(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",45),e.TgZ(1,"div",46),e._uU(2),e.qZA(),e.TgZ(3,"button",47),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeEditFieldModal()}),e.qZA(),e.qZA(),e.TgZ(4,"div",48),e.ynx(5,30),e.TgZ(6,"div",49),e.TgZ(7,"label",50),e._uU(8),e.qZA(),e._UZ(9,"input",51),e.qZA(),e.TgZ(10,"div",49),e.TgZ(11,"label",12),e._uU(12),e.qZA(),e._UZ(13,"input",52),e.qZA(),e.TgZ(14,"div",49),e.TgZ(15,"label",12),e._uU(16),e.qZA(),e.TgZ(17,"div"),e.TgZ(18,"div",15),e.YNc(19,ne,4,4,"ng-container",16),e.qZA(),e.qZA(),e.qZA(),e.BQk(),e.qZA(),e.TgZ(20,"div",53),e.TgZ(21,"button",54),e.NdJ("click",function(){return e.CHM(t),e.oxw().cancelEditFieldModal()}),e._uU(22),e.qZA(),e.TgZ(23,"button",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().editField()}),e._uU(24),e.qZA(),e.qZA()}if(2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.editFieldModalLabels.Title),e.xp6(3),e.Q6J("formGroup",t.editFieldForm),e.xp6(3),e.hij(" ",t.editFieldModalLabels.FieldName," "),e.xp6(1),e.Q6J("placeholder",t.editFieldModalLabels.FieldNamePlaceholder),e.xp6(3),e.hij(" ",t.editFieldModalLabels.FieldNotes," "),e.xp6(1),e.Q6J("placeholder",t.editFieldModalLabels.FieldNotesPlaceholder),e.xp6(3),e.Oqu(t.editFieldModalLabels.FieldSize),e.xp6(3),e.Q6J("ngForOf",t.fieldSizes),e.xp6(3),e.hij(" ",t.editFieldModalLabels.Cancel," "),e.xp6(1),e.Q6J("disabled",!t.editFieldForm.valid),e.xp6(1),e.hij(" ",t.editFieldModalLabels.Update," ")}}const ae=function(){return["/home/templates/view-all"]},de=[{path:"",component:N,children:[{path:"view-all",component:X},{path:":id",component:(()=>{class o{constructor(t,l,i,s,c,r,f,ce){this.route=t,this.fb=l,this.router=i,this.modalService=s,this.toastService=c,this.httpService=r,this.authService=f,this.ckeditor4AngularService=ce,this.templateId=0,this.templateName="",this.fieldNames=[],this.fieldSizes=[],this.route.params.subscribe(pe=>{this.templateId=+pe.id,this.templateId&&(this.getTemplate(),this.getFields(),this.getText())})}ngOnInit(){this.userDetails=this.authService.getUserDetails(),this.editorConfig=this.ckeditor4AngularService.getConfig(),this.labels=T,this.editFieldModalLabels=b,this.getFieldNames(),this.fieldSizes=K,this.fieldsForm=this.fb.group({fields:this.fb.array([])}),this.addFieldForm=this.fb.group({name:["",[a.kI.required]],notes:["",[a.kI.required]],size:[0,[a.kI.required]]}),this.editFieldForm=this.fb.group({name:["",[a.kI.required]],notes:["",[a.kI.required]],size:[0,[a.kI.required]]}),this.textAndConfigForm=this.fb.group({id:[0,[a.kI.required]],text:["",[a.kI.required]]})}getFieldNames(){this.httpService.get(m.n.FieldNames).subscribe(t=>{this.fieldNames=null==t?void 0:t.data},t=>{console.log(t)})}getTemplate(){this.httpService.get(`${m.n.Templates}/${this.templateId}`).subscribe(t=>{this.templateName=null==t?void 0:t.data[0].name},t=>{console.log(t)})}getFields(){this.httpService.get(`${m.n.Templates}/${this.templateId}/fields`).subscribe(t=>{var l,i;(null===(l=null==t?void 0:t.data)||void 0===l?void 0:l.length)>0&&(null===(i=null==t?void 0:t.data)||void 0===i||i.forEach(s=>{this.addField(s)}))},t=>{console.log(t)})}getText(){this.httpService.get(`${m.n.Templates}/${this.templateId}/text`).subscribe(t=>{var l,i,s,c;null===(l=this.textAndConfigForm.get("id"))||void 0===l||l.setValue((null===(i=null==t?void 0:t.data[0])||void 0===i?void 0:i.id)||0),null===(s=this.textAndConfigForm.get("text"))||void 0===s||s.setValue((null===(c=null==t?void 0:t.data[0])||void 0===c?void 0:c.text)||"")},t=>{console.log(t)})}addFieldFormSubmit(){this.addField({id:0,name:this.addFieldForm.value.name,notes:this.addFieldForm.value.notes,size:this.addFieldForm.value.size}),this.addFieldForm.reset()}get fields(){return this.fieldsForm.controls.fields}addField(t){const l=this.fb.group({id:[(null==t?void 0:t.id)||0,a.kI.required],name:[(null==t?void 0:t.name)||"",a.kI.required],notes:[(null==t?void 0:t.notes)||"",a.kI.required],size:[(null==t?void 0:t.size)||0,a.kI.required],isEdit:!1});this.fields.push(l)}openEditFieldModal(t,l){this.editFieldForm.controls.name.setValue(l.controls.name.value),this.editFieldForm.controls.notes.setValue(l.controls.notes.value),this.editFieldForm.controls.size.setValue(l.controls.size.value),this.modalRef=this.modalService.show(t,{class:"modal-dialog-centered",initialState:{field:l}})}cancelEditFieldModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editFieldForm.reset()}closeEditFieldModal(){var t;null===(t=this.modalRef)||void 0===t||t.hide(),this.editFieldForm.reset()}editField(){}deleteField(t){this.fields.removeAt(t)}manageField(t,l,i){switch(t){case"edit":l.get("isEdit").setValue(!0);break;case"update":l.get("isEdit").setValue(!1);break;case"remove":"number"==typeof i&&this.fields.removeAt(i)}}textAndConfigFormSubmit(){var t,l,i;const s=[];this.fields.controls.forEach(r=>{s.push({id:r.value.id,name:r.value.name,notes:r.value.notes,size:r.value.size})});const c={userId:null===(t=this.userDetails)||void 0===t?void 0:t.id,id:this.templateId,fields:s,textId:null===(l=this.textAndConfigForm.get("id"))||void 0===l?void 0:l.value,text:null===(i=this.textAndConfigForm.get("text"))||void 0===i?void 0:i.value};this.httpService.post(m.n.ComposeTemplate,c).subscribe(r=>{(null==r?void 0:r.message)&&this.toastService.success(null==r?void 0:r.message),this.router.navigate(["/home/templates/view-all"])},r=>{console.log(r)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(u.gz),e.Y36(a.qu),e.Y36(u.F0),e.Y36(x.tT),e.Y36(C.jE),e.Y36(F.O),e.Y36(q.e),e.Y36(B.g))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-compose-template"]],decls:49,vars:19,consts:[[1,"row","mb-4"],[1,"col"],[1,"page-title","mb-0","ps-4",3,"routerLink"],["class","fw-bold",4,"ngIf"],[1,"row"],[1,"col-12","col-lg-4","col-md-6","col-xl-3","ms-3","mb-3","py-3","bg-white","border"],[3,"formGroup","submit"],[1,"col-12","mb-3"],["for","field",1,"form-label","fw-bold"],["type","text","id","field","list","fields","formControlName","name",1,"form-control","form-control-sm",3,"placeholder"],["id","fields"],[3,"value",4,"ngFor","ngForOf"],["for","notes",1,"form-label","fw-bold"],["type","text","id","notes","formControlName","notes",1,"form-control","form-control-sm",3,"placeholder"],[1,"col-12","mb-2"],["role","group",1,"btn-group"],[4,"ngFor","ngForOf"],[1,"col-12","d-grid","d-sm-flex","align-items-sm-end"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["class","col",4,"ngIf"],[1,"col-12"],[1,"col-12","col-sm-12"],["for","text",1,"form-label","fw-bold"],["formControlName","text",3,"config"],["type","submit",1,"btn","btn-primary","btn-sm"],["editFieldModalTemplate",""],[1,"fw-bold"],[3,"value"],["type","radio","name","size","formControlName","size","autocomplete","off",1,"btn-check",3,"id","value"],[1,"btn","btn-outline-secondary",3,"for"],[3,"formGroup"],[1,"col-12","col-sm-12","d-flex","flex-wrap"],["formArrayName","fields"],[3,"formGroupName"],["class","d-inline-block m-2 mt-0 ms-0",4,"ngIf"],["class","d-inline-block mt-0 me-3 mb-2 ms-0",4,"ngIf"],[1,"d-inline-block","m-2","mt-0","ms-0"],[1,"badge","bg-secondary","d-flex","align-items-center","h-100","fw-normal"],[1,"ms-2"],[1,"bi","bi-pencil","cursor-pointer",3,"click"],[1,"bi","bi-trash","cursor-pointer",3,"click"],[1,"d-inline-block","mt-0","me-3","mb-2","ms-0"],[1,"badge","bg-light","text-dark","d-flex","align-items-center","p-0","fw-normal"],["type","text","placeholder","Field Name","formControlName","name",1,"form-control","form-control-sm",2,"min-height","fit-content","font-size","x-small"],[1,"bi","bi-check-circle","cursor-pointer",3,"click"],[1,"modal-header","px-5","pt-5","border-bottom-0"],[1,"modal-title","fs-6"],["type","button",1,"btn-close",3,"click"],[1,"modal-body","px-5"],[1,"mb-3"],["for","name",1,"form-label","fw-bold"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["type","text","id","notes","formControlName","notes",1,"form-control",3,"placeholder"],[1,"modal-footer","px-5","pb-5","border-top-0"],["type","button",1,"btn","btn-link","btn-sm","text-reset","text-uppercase","text-decoration-none",3,"click"],["type","button",1,"btn","btn-primary","btn-sm","text-uppercase",3,"disabled","click"]],template:function(t,l){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"h5",2),e._uU(3),e.YNc(4,E,2,1,"span",3),e.qZA(),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"form",6),e.NdJ("submit",function(){return l.addFieldFormSubmit()}),e.TgZ(8,"div",4),e.TgZ(9,"div",7),e.TgZ(10,"label",8),e._uU(11),e.qZA(),e._UZ(12,"input",9),e.TgZ(13,"datalist",10),e.YNc(14,L,1,1,"option",11),e.qZA(),e.qZA(),e.TgZ(15,"div",7),e.TgZ(16,"label",12),e._uU(17),e.qZA(),e._UZ(18,"input",13),e.qZA(),e.TgZ(19,"div",14),e.TgZ(20,"label",12),e._uU(21),e.qZA(),e.TgZ(22,"div"),e.TgZ(23,"div",15),e.YNc(24,ee,4,4,"ng-container",16),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div",17),e.TgZ(26,"button",18),e._uU(27),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(28,ie,6,2,"div",19),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"div",20),e._UZ(31,"hr"),e.qZA(),e.qZA(),e.TgZ(32,"div",4),e.TgZ(33,"div",20),e.TgZ(34,"form",6),e.NdJ("submit",function(){return l.textAndConfigFormSubmit()}),e.TgZ(35,"div",4),e.TgZ(36,"div",21),e.TgZ(37,"label",22),e._uU(38),e.qZA(),e._UZ(39,"ckeditor",23),e.qZA(),e.qZA(),e.TgZ(40,"div",4),e.TgZ(41,"div",20),e._UZ(42,"hr"),e.qZA(),e.qZA(),e.TgZ(43,"div",4),e.TgZ(44,"div",21),e.TgZ(45,"button",24),e._uU(46),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(47,se,25,11,"ng-template",null,25,e.W1O)),2&t&&(e.xp6(2),e.Q6J("routerLink",e.DdM(18,ae)),e.xp6(1),e.hij(" ",l.labels.Compose," "),e.xp6(1),e.Q6J("ngIf",l.templateName),e.xp6(3),e.Q6J("formGroup",l.addFieldForm),e.xp6(4),e.Oqu(l.labels.FieldName),e.xp6(1),e.Q6J("placeholder",l.labels.FieldNamePlaceholder),e.xp6(2),e.Q6J("ngForOf",l.fieldNames),e.xp6(3),e.Oqu(l.labels.FieldNotes),e.xp6(1),e.Q6J("placeholder",l.labels.FieldNotesPlaceholder),e.xp6(3),e.Oqu(l.labels.FieldSize),e.xp6(3),e.Q6J("ngForOf",l.fieldSizes),e.xp6(2),e.Q6J("disabled",!l.addFieldForm.valid),e.xp6(1),e.hij(" ",l.labels.Add," "),e.xp6(1),e.Q6J("ngIf",l.fields.controls.length>0),e.xp6(6),e.Q6J("formGroup",l.textAndConfigForm),e.xp6(4),e.Oqu(l.labels.TextAndConfig),e.xp6(1),e.Q6J("config",l.editorConfig),e.xp6(7),e.hij(" ",l.labels.Submit," "))},directives:[u.rH,p.O5,a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,p.sg,a.YN,a.Kr,a._,a.CE,a.x0,D.u],styles:[""]}),o})()}]}];let re=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,u.Bz.forChild(de)],u.Bz]}),o})(),me=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[p.ez,re,A.m]]}),o})()}}]);